import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as c,c as l,a as n,b as s,e as t,f as p}from"./app-60f9b323.js";const r={},u=p('<ul><li><p>引用赋值（又称引用传址）：某个变量或常量存放了指向引用类型（对象、数组、函数）字面量的地址。</p></li><li><p>传值赋值：某个变量或常量存放了基本类型的字面量</p></li><li><p>浅拷贝：在堆中创建新的内存保存拷贝后的对象，拷贝前后对象的基本类型数据互不影响；但拷贝前后对象的引用类型数据因为指向同一个内存地址，相互影响。</p></li><li><p>深拷贝：在堆中创建新的内存保存拷贝后的对象，拷贝前后对象的基本类型、引用类型数据互不影响。</p></li></ul><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">和<strong>原对象字面量</strong>是否指向同一地址</th><th style="text-align:center;"><strong>原对象字面量</strong>第一层为基本类型是否相互影响</th><th style="text-align:center;"><strong>原对象字面量</strong>包含子对象是否相互影响</th></tr></thead><tbody><tr><td style="text-align:center;">引用赋值</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">浅拷贝</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">✅</td></tr><tr><td style="text-align:center;">深拷贝</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td></tr></tbody></table><h2 id="引用赋值" tabindex="-1"><a class="header-anchor" href="#引用赋值" aria-hidden="true">#</a> 引用赋值</h2><p>引用赋值（又称引用传址）：某个变量或常量存放了指向引用类型（对象、数组、函数）字面量的地址，修改该变量或常量的属性、方法即修改字面量的内容。</p>',4),k={class:"hint-container details"},i=n("summary",null,"详情",-1),d={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E5%AF%B9%E8%B1%A1",target:"_blank",rel:"noopener noreferrer"},g={href:"https://zh.wikipedia.org/zh-my/%E5%AF%B9%E8%B1%A1_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)",target:"_blank",rel:"noopener noreferrer"},y=n("p",null,"标识符（identifier）可以标识变量名、常量名、类名、方法名、接口名等，标识符有其命名规则。",-1),m=n("p",null,"字面量：没有用标识符封装起来的数据原始值",-1),h=p(`<p>引用类型字面量引用赋值给某个变量后，再将该变量引用赋值给另一个变量，两个变量指向同一个字面量。修改该变量的属性、方法即修改字面量的内容。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1&#39;</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> obj1
obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;obj1 changed&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span> <span class="token comment">// { name: &#39;obj1 changed&#39; }</span>

<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr1
arr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1 changed&#39;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [&#39;arr1 changed&#39;]</span>

<span class="token keyword">let</span> <span class="token function-variable function">fun1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fun1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> fun2 <span class="token operator">=</span> fun1
fun1<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token string">&#39;fun1 changed&#39;</span> <span class="token comment">// 注意：函数的 name 属性不可改</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fun2<span class="token punctuation">.</span>n<span class="token punctuation">)</span> <span class="token comment">// fun1 changed</span>
</code></pre></div><p>引用类型字面量引用赋值给某个变量后，再将该变量引用赋值给另一个变量，再将新的字面量引用赋值给该变量，两个变量指向不同的字面量，两者不影响。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1&#39;</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> obj1
obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1 changed&#39;</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span> <span class="token comment">// { name: &#39;obj1&#39; }</span>

<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr1
arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1 changed&#39;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [&#39;arr1&#39;]</span>

<span class="token keyword">let</span> <span class="token function-variable function">fun1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fun1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> fun2 <span class="token operator">=</span> fun1
<span class="token function-variable function">fun1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fun1 change&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fun1</span>
</code></pre></div><h2 id="浅拷贝" tabindex="-1"><a class="header-anchor" href="#浅拷贝" aria-hidden="true">#</a> 浅拷贝</h2><p>原对象字面量第一层为基本类型，拷贝对象与原对象不相互影响。<br> 原对象字面量包含嵌套对象，拷贝对象与原对象相互影响。</p><h3 id="对象的浅拷贝" tabindex="-1"><a class="header-anchor" href="#对象的浅拷贝" aria-hidden="true">#</a> 对象的浅拷贝</h3><p><code>Object.assign()</code> 方法：</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj1<span class="token punctuation">)</span>

obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;name changed&#39;</span> <span class="token comment">// 原对象字面量第一层为基本类型不会被改变</span>
obj2<span class="token punctuation">.</span>child<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;child changed&#39;</span> <span class="token comment">// 原对象字面量包含嵌套对象会被改变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span> <span class="token comment">// { name: &#39;obj1&#39;, child: { name: &#39;child changed&#39; } }</span>
</code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>Object.assign()</code> 方法把源对象<strong>自身的</strong>、<strong>可枚举</strong>属性拷贝给目标对象，然后返回目标对象。</p><p>如果目标对象与源对象具有相同的键，则目标对象的属性会覆盖源对象。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> returnedTarget <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token comment">// { a: 1, b: 3, c: 4 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>returnedTarget<span class="token punctuation">)</span> <span class="token comment">// { a: 1, b: 3, c: 4 }</span>
</code></pre></div></div><p>展开运算符 <code>...</code> 同上：</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;obj1&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>obj1<span class="token punctuation">}</span>
</code></pre></div><h3 id="数组的浅拷贝" tabindex="-1"><a class="header-anchor" href="#数组的浅拷贝" aria-hidden="true">#</a> 数组的浅拷贝</h3><p><code>concat()</code>：原数组不会改变</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1 changed&#39;</span><span class="token punctuation">]</span> <span class="token comment">// 原数组字面量第一层为基本类型不会被改变</span>
arr1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token string">&#39;child changed&#39;</span> <span class="token comment">// 原数组字面量包含嵌套对象会被改变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [&#39;arr1&#39;, { child: &#39;child changed&#39; }]</span>
</code></pre></div><p><code>slice()</code> 同上：原数组不会改变</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;arr1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="深拷贝" tabindex="-1"><a class="header-anchor" href="#深拷贝" aria-hidden="true">#</a> 深拷贝</h2><p>拷贝对象与原对象不相互影响。</p><h3 id="json-序列化再反序列化" tabindex="-1"><a class="header-anchor" href="#json-序列化再反序列化" aria-hidden="true">#</a> JSON 序列化再反序列化</h3><p>JSON 序列化（字符串化）再反序列化（解析）</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>弊端：</p><ul><li><code>undefined</code>、<code>symbol</code>、函数会丢失</li><li><code>NaN</code>、<code>Infinity</code>、<code>-Infinity</code> 会被序列化为 <code>null</code></li><li>无法解决循环引用的问题</li></ul><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">NaN</span><span class="token punctuation">,</span>
  <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> copyObj1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyObj1<span class="token punctuation">)</span> <span class="token comment">// {d: null, e: null, f: null}</span>

obj<span class="token punctuation">.</span>self <span class="token operator">=</span> obj
<span class="token keyword">const</span> copyObj2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Uncaught TypeError: Converting circular structure to JSON</span>
</code></pre></div><h3 id="递归循环" tabindex="-1"><a class="header-anchor" href="#递归循环" aria-hidden="true">#</a> 递归循环</h3><p>功能：</p>`,27),b=n("li",null,"支持对象、数组、日期、正则的深拷贝",-1),f=n("li",null,"基本类型、函数无需深拷贝（深拷贝函数意义不大）",-1),j=n("li",null,[s("使用 "),n("code",null,"WeakMap"),s(" 解决循环引用")],-1),w=n("li",null,[s("此版本不支持 "),n("code",null,"Symbol"),s(" 作为键名的情况")],-1),v=n("code",null,"DOM",-1),_={href:"https://juejin.cn/post/7072528644739956773#heading-6",target:"_blank",rel:"noopener noreferrer"},x=p(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>解决循环引用：存储当前对象和拷贝对象的对应关系。每次拷贝当前对象前，都先看一下这个对象是不是已经拷贝过了，如果有的话直接返回。避免自身引用导致栈溢出。</p><p><code>WeakMap</code> 弱引用映射与 <code>Map</code> 强引用映射不同点：</p><ul><li>强引用需要自己手动置为 null 才能被回收，弱引用则由垃圾回收机制判断是否回收。</li><li><code>Map</code> 可以接受所有类型作为键名，<code>WeakMap</code> 只能接受对象（null 除外）作为键名。</li></ul></div><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj <span class="token comment">// null 无需深拷贝，直接返回</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 日期对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 正则对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj <span class="token comment">// 基本类型、函数无需深拷贝，直接返回</span>

  <span class="token comment">// 对象、数组需要深拷贝</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 拷贝前，先去存储空间中找，如果有的话直接返回</span>
  <span class="token keyword">let</span> cloneObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建新的克隆对象或数组</span>
  hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> cloneObj<span class="token punctuation">)</span> <span class="token comment">// 如果存储空间中没有就存进 hash 里</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span> <span class="token comment">// 递归深拷贝每层</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> cloneObj
<span class="token punctuation">}</span>
</code></pre></div><p>测试：</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bool</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">empty1</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">empty2</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">array1</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">array2</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;never&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;nevermore&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">regexp</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(j|t)sx</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;never&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">f1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span>
  <span class="token function-variable function">f2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span>self <span class="token operator">=</span> a <span class="token comment">// 对象某个属性引用自身（循环引用）</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token comment">// 基本类型无需深拷贝</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>number <span class="token operator">===</span> b<span class="token punctuation">.</span>number<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>bool <span class="token operator">===</span> b<span class="token punctuation">.</span>bool<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>string <span class="token operator">===</span> b<span class="token punctuation">.</span>string<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>empty1 <span class="token operator">===</span> b<span class="token punctuation">.</span>empty1<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>empty2 <span class="token operator">===</span> b<span class="token punctuation">.</span>empty2<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token comment">// 函数无需深拷贝</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1 <span class="token operator">===</span> b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2 <span class="token operator">===</span> b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token comment">// 对象、数组需要深拷贝</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>self <span class="token operator">===</span> b<span class="token punctuation">.</span>self<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>array1 <span class="token operator">===</span> b<span class="token punctuation">.</span>array1<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>array2 <span class="token operator">===</span> b<span class="token punctuation">.</span>array2<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>date <span class="token operator">===</span> b<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>regexp <span class="token operator">===</span> b<span class="token punctuation">.</span>regexp<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>obj <span class="token operator">===</span> b<span class="token punctuation">.</span>obj<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="structuredclone" tabindex="-1"><a class="header-anchor" href="#structuredclone" aria-hidden="true">#</a> structuredClone()</h3>`,5),O=n("code",null,"structuredClone()",-1),N={href:"https://link.juejin.cn/?target=https://developer.mozilla.org/en-US/docs/Web/API/structuredClone",target:"_blank",rel:"noopener noreferrer"},S=p(`<div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> copyObj <span class="token operator">=</span> <span class="token function">structuredClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 结构化拷贝（深拷贝）</span>
obj<span class="token punctuation">.</span>child<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;child changed&#39;</span> <span class="token comment">// 修改原对象</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { child: { name: &#39;child changed&#39; } }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyObj<span class="token punctuation">)</span> <span class="token comment">// { child: { name: &#39;child&#39; } }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>child <span class="token operator">===</span> copyObj<span class="token punctuation">.</span>child<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2>`,2),E={href:"https://juejin.cn/post/6844904197595332622",target:"_blank",rel:"noopener noreferrer"},C={href:"https://www.cnblogs.com/cench/p/6019453.html",target:"_blank",rel:"noopener noreferrer"},A={href:"https://juejin.cn/post/7072528644739956773",target:"_blank",rel:"noopener noreferrer"},J={href:"https://link.juejin.cn/?target=https://developer.mozilla.org/en-US/docs/Web/API/structuredClone",target:"_blank",rel:"noopener noreferrer"};function M(D,I){const a=e("ExternalLinkIcon");return c(),l("div",null,[u,n("details",k,[i,n("p",null,[s("在计算机科学中，对象是指内存中的可以被标识符引用的一块区域。 ——引用自 MDN "),n("a",d,[s("JavaScript 数据类型和数据结构"),t(a)])]),n("p",null,[s("在软件系统中，对象具有唯一的标识符，对象包括属性（Properties）和方法（Methods），属性就是需要记忆的信息，方法就是对象能够提供的服务 ——引用自 "),n("a",g,[s("维基百科"),t(a)])]),y,m]),h,n("ul",null,[b,f,j,w,n("li",null,[s("没有拷贝 "),v,s(" 元素，具体实现见 "),n("a",_,[s("轻松拿下 JS 浅拷贝、深拷贝"),t(a)])])]),x,n("p",null,[s("使用 Web API 的"),O,s(" 结构化拷贝可以实现深拷贝，详见"),n("a",N,[s("MDN"),t(a)])]),S,n("ul",null,[n("li",null,[n("a",E,[s("浅拷贝与深拷贝"),t(a)])]),n("li",null,[n("a",C,[s("JS 的引用赋值与传值赋值"),t(a)])]),n("li",null,[n("a",A,[s("轻松拿下 JS 浅拷贝、深拷贝"),t(a)])]),n("li",null,[n("a",J,[s("structuredClone()——MDN"),t(a)])])])])}const z=o(r,[["render",M],["__file","deepClone.html.vue"]]);export{z as default};
